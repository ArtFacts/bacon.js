!function(n,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):n.Bacon=t()}(this,function(){"use strict";function n(n,t){function r(){this.constructor=n}for(var e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);n.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}function t(){}function r(n){return n&&n._isObservable}function e(){return hr}function i(n){return n&&(n._isSome||n._isNone)?n:new ar(n)}function o(n){return function(t,r){return n(r,t)}}function u(n){return new wr(n)}function s(n){return new br(n)}function c(){return new gr}function f(n){return n&&n._isEvent?n:s(n)}function a(n){return n&&n._isEvent}function h(n){return n.isError}function p(n){return n.hasValue}function l(n){return n.isEnd}function v(n){if(Ar.length&&!Ir)try{Ir=!0,Ar.forEach(function(t){t(n)})}finally{Ir=!1}}function d(n,t){for(var r=[],e=2;e<arguments.length;e++)r[e-2]=arguments[e];var i=n||t;return i&&i._isDesc?n||t:new kr(n,t,r)}function y(n){return fr(n)?pr.flatMap(y,n):r(n)?[n]:(void 0!==n&&null!==n?n._isSource:void 0)?[n.obs]:[]}function b(){return pr.toString({rootEvent:_r,processingAfters:Nr,waiterObs:Or,waiters:Tr,aftersStack:Pr,aftersStackHeight:Fr,flushed:Cr})}function w(n){n<=Fr||(Pr[n-1]||(Pr[n-1]=[[],0]),Fr=n)}function m(){return void 0!==_r}function g(n,t){_r?A(n,t):xr.scheduler.setTimeout(t,0)}function E(n,t){if(!_r&&!Nr)return t();w(1);for(var r=0;r<Fr-1&&!S(n,Pr[r][0]);)r++;Pr[r][0].push([n,t]),_r||D()}function S(n,t){for(var r=0;r<t.length;r++)if(t[r][0].id==n.id)return!0;return!1}function D(){var n=Fr;if(n){var t=!Nr;Nr=!0;try{for(;Fr>=n;){var r=Pr[Fr-1];if(!r)throw new Error("Unexpected stack top: "+r);var e=r[0],i=r[1];if(!(i<e.length)){r[0]=[],r[1]=0;break}var o=e[i],u=o[1];r[1]++,w(Fr+1);var s=!1;try{for(u(),s=!0;Fr>n&&0==Pr[Fr-1][0].length;)Fr--}finally{s||(Pr=[],Fr=0)}}}finally{t&&(Nr=!1)}}}function A(n,t){if(_r){var r=Tr[n.id];return void 0===r?(r=Tr[n.id]=[t],Or.push(n)):r.push(t)}return t()}function I(){for(;Or.length>0;)B(0,!0);Cr={}}function B(n,t){var r=Or[n],e=r.id,i=Tr[e];Or.splice(n,1),delete Tr[e],t&&Or.length>0&&k(r);for(var o=0;o<i.length;o++)(0,i[o])()}function k(n){if(!Cr[n.id]){for(var t,r=n.internalDeps(),e=0;e<r.length;e++)if(t=r[e],k(t),Tr[t.id]){var i=pr.indexOf(Or,t);B(i,!1)}Cr[n.id]=!0}}function M(n,t,r,e){if(_r)return r.apply(t,e);_r=n;try{var i=r.apply(t,e);I()}finally{_r=void 0,D()}return i}function x(){return _r?_r.id:void 0}function W(n,t,r){var e=!1,i=!1,o=function(){i=!0},u=function(){e=!0,o()};return o=t(function(t){return E(n,function(){if(!e){if(r(t)===Dr)return u()}})}),i&&o(),u}function _(){return Or.length>0}function O(n,t,r){return r.transform(T(n,t),new kr(r,"withStateMachine",[n,t]))}function T(n,t){var r=n;return function(n,e){var i=t(r,n),o=i[0],u=i[1];r=o;for(var s=cr.more,c=0;c<u.length;c++){if((s=e(u[c]))===cr.noMore)return s}return s}}function P(n,t){return n===t}function F(n){return void 0!==n&&null!==n&&n._isNone}function C(n,t){void 0===t&&(t=P);var r=new kr(n,"skipDuplicates",[]);return O(e(),function(n,r){return p(r)?r.isInitial||F(n)||!t(n.get(),r.value)?[new ar(r.value),[r]]:[n,[]]:[n,[r]]},n).withDesc(r)}function N(n,t,r){return t.transform(V(n),r||new kr(t,"take",[n]))}function V(n){return function(t,r){return t.hasValue?(n--,n>0?r(t):(0===n&&r(t),r(c()),Dr)):r(t)}}function L(n,t){t.subscribe(function(t){"undefined"!=typeof console&&"function"==typeof console.log&&console.log.apply(console,n.concat([t.log()]))})}function q(n){return function(t,r){return"undefined"!=typeof console&&null!==console&&"function"==typeof console.log&&console.log.apply(console,n.concat([t.log()])),r(t)}}function U(n){return function(t,r){return h(t)&&n(t.error),r(t)}}function j(n){return function(t,r){return p(t)&&n(t.value),r(t)}}function Q(n){return function(t,r){return l(t)&&n(),r(t)}}function z(n,r,e){var i,o=r,u=!1,s=function(r){var s=!1,c=t,f=Sr,a=function(){return s||(s=u=!0,(f=r(new wr(o)))===Dr&&(c(),c=t)),f};return c=n.subscribeInternal(function(n){if(p(n)){if(u&&n.isInitial)return Sr;n.isInitial||a(),s=u=!0;var t=o,i=e(t,n.value);return o=i,r(n.apply(i))}if(n.isEnd&&(f=a()),f!==Dr)return r(n)}),Vr.whenDoneWith(i,a),c};return i=new Gr(new kr(n,"scan",[r,e]),s)}function H(n){var t=pr.toFunction(n);return function(n,r){return l(n)?(r(s(t(n))),r(c()),Dr):r(n)}}function R(n){var t=pr.toFunction(n);return function(n,r){return r(h(n)?s(t(n.error)):n)}}function Y(n){return n.transform(function(n,t){return h(n)?Sr:t(n)},new kr(n,"skipErrors",[]))}function X(n){var t;return n.transform(function(n,r){if(l(n))return t&&r(t),r(c()),Dr;p(n)?t=n:r(n)}).withDesc(new kr(n,"last",[]))}function $(n,r){return function(e){var i=!1,o=!1,u=t,s=Sr,c=function(){if(!i)return n.forEach(function(n){if(i=!0,(s=e(new wr(n)))===Dr)return u(),u=t,t})};return u=r(function(t){return t instanceof yr?t.isInitial&&!o?(n=new ar(t.value),Sr):(t.isInitial||c(),i=!0,n=new ar(t.value),e(t)):(t.isEnd&&(s=c()),s!==Dr?e(t):void 0)}),o=!0,c(),u}}function G(n,t){return new Gr(n,$(e(),t))}function J(n){var r=new Kr(new kr("Bacon","once",[n]),function(e){return Vr.soonButNotYet(r,function(){e(f(n)),e(c())}),t});return r}function K(n,t,r){void 0===r&&(r={});var e=pr.toFunction(n),i=t,o=[i],u=[],s=t._isProperty,f=s?G:Ut,a=!1,h=r.desc||new kr(t,"flatMap_",[e]),p=f(h,function(n){function t(t){if(s&&t.isInitial){if(a)return Sr;a=!0}var r=nn(e(t));return u.push(r),h.add(function(t,e){return r.subscribeInternal(function(i){if(i.isEnd)return pr.remove(r,u),o(),f(e),Dr;i=i.toNext();var s=n(i);return s===Dr&&t(),s})})}function o(){var n=p.shift();n&&t(n)}function f(t){return t(),h.empty()?n(c()):Sr}var h=new Wr,p=[];return h.add(function(e,o){return i.subscribeInternal(function(e){return e.isEnd?f(o):e.isError&&!r.mapError?n(e):r.firstOnly&&h.count()>1?Sr:h.unsubscribed?Dr:r.limit&&h.count()>r.limit?p.push(e):t(e)})}),h.unsubscribe});return p.internalDeps=function(){return u.length?o.concat(u):o},p}function Z(n){return"function"==typeof n?function(t){return n(t.value)}:function(t){return n}}function nn(n){return r(n)?n:J(n)}function tn(n,t){return K(t,n,{mapError:!0,desc:new kr(n,"flatMapEvent",[t])})}function rn(n){return n.transform(function(n,t){l(n)&&(t(s({})),t(c()))})}function en(n,t){return void 0===t&&(t=function(n){return!0}),n.transform(function(n,r){return h(n)&&t(n.error)?(r(n),r(c())):r(n)},new kr(n,"endOnError",[]))}function on(n){return null!=n&&(n._isSource?n.sync:n._isEventStream)}function un(n){return null!=n&&n._isSource?n:null!=n&&n._isProperty?new qr(n,!1):new Ur(n,!0)}function sn(){return new Kr(d("Bacon","never"),function(n){return n(c()),t})}function cn(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];return an(Ut,n)}function fn(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];return an(G,n)}function an(n,t){if(0===t.length)return sn();var r=hn(dn(t)),e=r[0],i=r[1];if(!e.length)return sn();var o=pr.any(e,function(n){return n.flatten})&&yn(pr.map(function(n){return n.obs},e)),u=new kr("Bacon","when",Array.prototype.slice.call(t)),s=n(u,function(n){function t(n){for(var t=0;t<n.ixs.length;t++){var r=n.ixs[t];if(!e[r.index].hasAtLeast(r.count))return!1}return!0}function r(n){for(var t=0;t<n.ixs.length;t++){var r=n.ixs[t];if(!e[r.index].mayHave(r.count))return!0}return!1}function u(n){return!n.source.flatten}function f(f){return function(p){function l(){return Vr.whenDoneWith(s,d)}function v(){var r;if(void 0!==(r=a.pop()))for(var o,s=cr.more,c=0;c<i.length;c++)if(o=i[c],t(o)){for(var f=[],h=0;h<o.ixs.length;h++){var p=e[o.ixs[h].index].consume();if(!p)throw new Error("Event was undefined");f.push(p.value)}var l=o.f.apply(null,f);return s=n(r.e.apply(l)),a.length&&(a=pr.filter(u,a)),s===cr.noMore?s:v()}return cr.more}function d(){var t=v();h&&(pr.all(e,bn)||pr.all(i,r))&&(t=cr.noMore,n(c())),t===cr.noMore&&p()}return f.subscribe(function(t){if(t.isEnd)h=!0,f.markEnded(),l();else if(t.isError)var r=n(t);else{var e=t;f.push(e),f.sync&&(a.push({source:f,e:e}),o||Vr.hasWaiters()?l():d())}return r===Dr&&p(),r||Sr})}}var a=[],h=!1;return new Wr(pr.map(f,e)).unsubscribe});return s}function hn(n){for(var t=[],r=[],e=0;e<n.length;e++){for(var i,o=n[e],u=o[0],s=o[1],c={f:s,ixs:[]},f=!1,a=0;a<u.length;a++){i=u[a];var h=pr.indexOf(t,i);f||(f=on(i)),h<0&&(t.push(i),h=t.length-1);for(var p=0;p<c.ixs.length;p++){var l=c.ixs[p];l.index===h&&l.count++}c.ixs.push({index:h,count:1})}if(u.length>0&&!f)throw new Error("At least one EventStream required, none found in "+u);u.length>0&&r.push(c)}return[pr.map(un,t),r]}function pn(n){for(var t=0,r=n.length,e=[];t<r;){var i=pr.toArray(n[t++]),o=pr.toFunction(n[t++]);e.push([i,o])}return e}function ln(n){return n instanceof Array&&!r(n[n.length-1])}function vn(n){return n[0]instanceof Array}function dn(n){for(var t=[],r=0;r<n.length;r++){var e=n[r];if(!ln(e))return pn(n);if(vn(e))t.push([e[0],pr.toFunction(e[1])]);else{var i=e.slice(0,e.length-1),o=pr.toFunction(e[e.length-1]);t.push([i,o])}}return t}function yn(n,t){function r(n){if(pr.contains(t,n))return!0;var e=n.internalDeps();return e.length?(t.push(n),pr.any(e,r)):(t.push(n),!1)}return void 0===t&&(t=[]),pr.any(n,r)}function bn(n){return!n.sync||n.ended}function wn(n,t,r){return cn([new qr(t.toProperty(),!1),new qr(n,!0),o(r)]).withDesc(new kr(n,"withLatestFrom",[t,r]))}function mn(n,t,r){return fn([new qr(t.toProperty(),!1),new qr(n,!0),o(r)]).withDesc(new kr(n,"withLatestFrom",[t,r]))}function gn(n,t,r){if(n instanceof Gr)return mn(n,t,r);if(n instanceof Kr)return wn(n,t,r);throw new Error("Unknown observable: "+n)}function En(n,t){return t instanceof Gr?gn(n,t,function(n,t){return t}):n.transform(Sn(t),new kr(n,"map",[t]))}function Sn(n){var t=pr.toFunction(n);return function(n,r){return r(n.fmap(t))}}function Dn(n){return new Gr(new kr("Bacon","constant",[n]),function(r){return r(u(n)),r(c()),t})}function An(n){return n=Array.prototype.slice.call(n),pr.flatMap(In,n)}function In(n){return r(n)?[n]:fr(n)?An(n):[Dn(n)]}function Bn(n){return pr.isFunction(n[0])?[An(Array.prototype.slice.call(n,1)),n[0]]:[An(Array.prototype.slice.call(n,0,n.length-1)),pr.last(n)]}function kn(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];return Mn(An(n))}function Mn(n,t){var r=pr.map(function(n){return new jr(n)},n);return an(function(n,r){return new Kr(n,r,void 0,t)},[r,function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];return n}]).withDesc(new kr("Bacon","groupSimultaneous",n))}function xn(n,t){return Mn([n,t],Jr).map(function(n){return 0===n[1].length}).toProperty(!1).skipDuplicates().withDesc(new kr(n,"awaiting",[t]))}function Wn(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];if(n=An(n),n.length){for(var e=[],i=0;i<n.length;i++){var o=r(n[i])?n[i]:Dn(n[i]);e.push(Tn(o))}return fn([e,function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];return n}]).withDesc(new kr("Bacon","combineAsArray",n))}return Dn([])}function _n(){var n=Bn(arguments),t=n[0],r=n[1],e=new kr("Bacon","combineWith",[r].concat(t));return Wn(t).map(function(n){return r.apply(void 0,n)}).withDesc(e)}function On(n,t,r){return fn([[Tn(n),Tn(t)],r]).withDesc(new kr(n,"combine",[t,r]))}function Tn(n){return new qr(n,!0)}function Pn(n,t){return n.transform(function(n,r){return n.hasValue&&t>0?(t--,Sr):r(n)},new kr(n,"skip",[t]))}function Fn(n,t){return K(Z(t),n,{desc:new kr(n,"flatMapConcat",[t]),limit:1})}function Cn(n,t){void 0===t&&(t=pr.id);var r=new kr("Bacon","fromBinder",[n,t]);return new Kr(r,function(r){var e=!1,i=!1,o=function(){if(!e)return void 0!==u&&null!==u?(u(),e=!0):i=!0},u=n(function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];for(var i=t.apply(void 0,n),u=fr(i)&&a(pr.last(i))?i:[i],s=Sr,c=0;c<u.length;c++){var h=f(u[c]);if((s=r(h))===Dr||h.isEnd)return o(),s}return s});return i&&o(),o})}function Nn(n,t){var r=new kr("Bacon","fromPoll",[n,t]);return Cn(function(t){var r=xr.scheduler.setInterval(t,n);return function(){return xr.scheduler.clearInterval(r)}},t).withDesc(r)}function Vn(n,t){return Nn(n,function(){return s(t)}).withDesc(new kr("Bacon","interval",[n,t]))}function Ln(n,t,r){var e=Qr(r);return gn(t,n,o(e)).withDesc(new kr(n,"sampledBy",[t,e]))}function qn(n,t,r){return Ln(n.toProperty(),t,r).withDesc(new kr(n,"sampledBy",[t,r]))}function Un(n,t){return Ln(n,Vn(t,{}),function(n,t){return n}).withDesc(new kr(n,"sample",[t]))}function jn(n,t,r){return new Gr(new kr(n,"transform",[t]),function(r){return n.subscribeInternal(function(n){return t(n,r)})}).withDesc(r)}function Qn(n,t,r){return new Kr(new kr(n,"transform",[t]),function(r){return n.subscribeInternal(function(n){return t(n,r)})},void 0,Jr).withDesc(r)}function zn(n,t){var r,e=function(n){return t(n,r)};return function(t,i){return r=i,n(t,e)}}function Hn(n){if("boolean"==typeof n)return pr.always(n);if("function"!=typeof n)throw new Error("Not a function: "+n);return n}function Rn(n,t,r,e){return t instanceof Gr?gn(n,t,function(n,t){return[n,t]}).transform(zn(r(function(n){n[0];return n[1]}),Sn(function(n){var t=n[0];n[1];return t})),e):n.transform(r(Hn(t)),e)}function Yn(n,t){return Rn(n,t,Xn,new kr(n,"filter",[t]))}function Xn(n){return function(t,r){return t.filter(n)?r(t):Sr}}function $n(n){return n.map(function(n){return!n}).withDesc(new kr(n,"not",[]))}function Gn(n,t){return n.combine(Kn(t),function(n,t){return n&&t}).withDesc(new kr(n,"and",[t]))}function Jn(n,t){return n.combine(Kn(t),function(n,t){return n||t}).withDesc(new kr(n,"or",[t]))}function Kn(n){return qt(n)?n:Dn(n)}function Zn(n,t){return K(Z(t),n,{firstOnly:!0,desc:new kr(n,"flatMapFirst",[t])})}function nt(n,r,e){return new Kr(new kr(n,"concat",[r]),function(e){var i=t,o=n.dispatcher.subscribe(function(n){return n.isEnd?i=r.toEventStream().dispatcher.subscribe(e):e(n)});return function(){return o(),i()}},void 0,e)}function tt(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];var r=An(n);return r.length?pr.fold(pr.tail(r),pr.head(r).toEventStream(),function(n,t){return n.concat(t)}).withDesc(new kr("Bacon","concatAll",r)):sn()}function rt(n,t){var r=new Kr(d(n,"justInitValue"),function(t){var e,i=n.dispatcher.subscribe(function(n){return n.isEnd||(e=n),Dr});return Vr.whenDoneWith(r,function(){return void 0!==e&&null!==e&&t(e),t(c())}),i},void 0,Jr);return r.concat(t,Jr).toProperty()}function et(n,t,r){return n.scan(t,r).last().withDesc(new kr(n,"fold",[t,r]))}function it(n,t){return J(t).concat(n).withDesc(new kr(n,"startWith",[t]))}function ot(n,t){return n.scan(t,function(n,t){return t}).withDesc(new kr(n,"startWith",[t]))}function ut(n,t){var r=n.mapEnd(zr),e=Mn([r,t.skipErrors()],Jr);return n instanceof Gr&&(e=e.toProperty()),e.transform(function(n,t){if(p(n)){var r=n.value,e=r[0];if(r[1].length)return t(c());for(var i=Sr,o=0;o<e.length;o++){var u=e[o];if(u===zr)return t(c());i=t(s(u))}return i}return t(n)},new kr(n,"takeUntil",[t]))}function st(n,t){return K(Z(t),n,{desc:new kr(n,"flatMap",[t])})}function ct(n,t){return K(function(n){if(n instanceof Er){var r=n.error;return t(r)}return n},n,{mapError:!0,desc:new kr(n,"flatMapError",[t])})}function ft(n,t){var r=pr.toFunction(t),e=qt(n)?n.toEventStream(Jr):n,i=st(e,function(n){return nn(r(n)).takeUntil(e)});return qt(n)&&(i=i.toProperty()),i.withDesc(new kr(n,"flatMapLatest",[r]))}function at(n,t,r){return K(Z(r),n,{desc:new kr(n,"flatMapWithConcurrencyLimit",[t,r]),limit:t})}function ht(n,t){return lt(n,t,Number.MAX_VALUE).withDesc(new kr(n,"bufferWithTime",[t]))}function pt(n,t){return lt(n,void 0,t).withDesc(new kr(n,"bufferWithCount",[t]))}function lt(n,t,r){function e(n){return n.values.length===r?n.flush():void 0!==t?n.schedule():void 0}var i=new kr(n,"bufferWithTimeOrCount",[t,r]);return vt(n,t,e,e).withDesc(i)}function vt(n,r,e,i){void 0===e&&(e=t),void 0===i&&(i=t);var o=Sr;if(!pr.isFunction(r)){var u=r;r=function(n){return xr.scheduler.setTimeout(n,u)}}var s=new Yr(i,e,r);return n.transform(function(n,t){return s.push=t,p(n)?(s.values.push(n.value),e(s)):n.isError?o=t(n):n.isEnd&&(s.end=n,s.scheduled||s.flush()),o}).withDesc(new kr(n,"buffer",[]))}function dt(n,t){var r=!1;return function(e){function i(){var n=u||[];u=void 0;for(var t=0;t<n.length;t++){e(n[t])}}var o=Vr.isInTransaction();r=!0;var u;try{return t(function(t){if(!r&&!u)return e(t);u?u.push(t):(u=[t],o?Vr.soonButNotYet(n,i):xr.scheduler.setTimeout(i,0))})}finally{r=!1}}}function yt(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];return n=An(n),n.length?new Kr(new kr("Bacon","mergeAll",n),function(t){var r=0,e=function(e){return function(i){return e.subscribeInternal(function(e){if(e.isEnd)return r++,r===n.length?t(c()):Sr;var o=t(e);return o===Dr&&i(),o})}},i=pr.map(e,n);return new Wr(i).unsubscribe}):sn()}function bt(n,t){return Cn(function(r){var e=function(){return r([t,c()])},i=xr.scheduler.setTimeout(e,n);return function(){return xr.scheduler.clearTimeout(i)}}).withDesc(new kr("Bacon","later",[n,t]))}function wt(n,t){return n.delayChanges(new kr(n,"delay",[t]),function(n){return n.flatMap(function(n){return bt(t,n)})})}function mt(n,t){return n.delayChanges(new kr(n,"debounce",[t]),function(n){return n.flatMapLatest(function(n){return bt(t,n)})})}function gt(n,t){return n.delayChanges(new kr(n,"debounceImmediate",[t]),function(n){return n.flatMapFirst(function(n){return J(n).concat(bt(t,n).errors())})})}function Et(n,t){return n.delayChanges(new kr(n,"throttle",[t]),function(n){return n.bufferWithTime(t).map(function(n){return n[n.length-1]})})}function St(n,t){var r=new kr(n,"bufferingThrottle",[t]);return n.delayChanges(r,function(n){return n.flatMapConcat(function(n){return J(n).concat(bt(t,n).errors())})})}function Dt(n,t){return Rn(n,t,At,new kr(n,"takeWhile",[t]))}function At(n){return function(t,r){return t.filter(n)?r(t):(r(c()),Dr)}}function It(n,t){var r=t.transform(zn(V(1),Sn(!0))).toProperty().startWith(!1);return n.filter(r).withDesc(new kr(n,"skipUntil",[t]))}function Bt(n,t){return Rn(n,t,kt,new kr(n,"skipWhile",[t]))}function kt(n){var t=!1;return function(r,e){return!t&&p(r)&&n(r.value)?Sr:(r.hasValue&&(t=!0),e(r))}}function Mt(n,t,r){void 0===r&&(r=pr.id);var e={};return n.transform(zn(Xn(function(n){return!e[t(n)]}),Sn(function(i){var o=t(i),u=n.filter(function(n){return t(n)===o}),s=J(i).concat(u),c=r(s,i).transform(function(n,t){t(n),n.isEnd&&delete e[o]});return e[o]=c,c})))}function xt(n,t,r){return void 0===r&&(r=0),n.scan([],function(n,r){return n.concat([r]).slice(-t)}).filter(function(n){return n.length>=r}).withDesc(new kr(n,"slidingWindow",[t,r]))}function Wt(n,t,r){return jn(z(n,[t],function(n,t){return[t,r(n[0],t)]}),zn(Xn(function(n){return 2===n.length}),Sn(function(n){return n[1]})),new kr(n,"diff",[t,r]))}function _t(n,t,r){var e=t;return n.flatMapConcat(function(n){return nn(r(e,n)).doAction(function(n){return e=n})}).toProperty().startWith(t).withDesc(new kr(n,"flatScan",[t,r]))}function Ot(n,t){var r=!1,e=[],i=!1;return new Kr(new kr(n,"holdWhen",[t]),function(o){var u=new Wr,f=!1,a=function(n){if(n&&n(),u.empty()&&f)return o(c())};return u.add(function(n,u){return t.subscribeInternal(function(n){if(!p(n))return n.isEnd?a(u):o(n);if(!(r=n.value)){var t=e;e=[];for(var f=Sr,h=0;h<t.length;h++)f=o(s(t[h]));return i&&(o(c()),u(),f=Dr),f}})}),u.add(function(t,u){return n.subscribeInternal(function(n){return r&&p(n)?e.push(n.value):n.isEnd&&e.length?(i=!0,a(u)):o(n)})}),f=!0,a(),u.unsubscribe})}function Tt(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];return cn([pr.map(function(n){return n.toEventStream()},An(n)),function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];return n}]).withDesc(new kr("Bacon","zipAsArray",n))}function Pt(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];var r=Bn(n),e=r[0],i=r[1];return e=pr.map(function(n){return n.toEventStream()},e),cn([e,i]).withDesc(new kr("Bacon","zipWith",[i].concat(e)))}function Ft(n,t,r){return Pt([n,t],r||Array).withDesc(new kr(n,"zip",[t]))}function Ct(n){function t(n){return n[n.length-1]}function e(n,r,e){return t(n)[r]=e,e}function i(n,t){return function(r,i){e(r,n,i[t])}}function o(n,t){return function(r){e(r,n,t)}}function u(n){return fr(n)?[]:{}}function s(n,t){return function(r){var i=u(t);e(r,n,i),r.push(i)}}function c(n){if(r(n))return!0;if(n&&(n.constructor==Object||n.constructor==Array))for(var t in n)if(Object.prototype.hasOwnProperty.call(n,t)){var e=n[t];if(c(e))return!0}}function f(n,t){if(r(t))l.push(t),p.push(i(n,l.length-1));else if(c(t)){var e=function(n){n.pop()};p.push(s(n,t)),h(t),p.push(e)}else p.push(o(n,t))}function a(t){for(var r=u(n),e=[r],i=0;i<p.length;i++)(0,p[i])(e,t);return r}function h(n){pr.each(n,f)}var p=[],l=[];return(c(n)?(h(n),Wn(l).map(a)):Dn(n)).withDesc(new kr("Bacon","combineTemplate",[n]))}function Nt(n,t){return n.combine(Ct(t),function(n,t){return t[n]}).withDesc(new kr(n,"decode",[t]))}function Vt(n,t){if("function"!=typeof t){if("function"!=typeof Promise)throw new Error("There isn't default Promise, use shim or parameter");t=function(n){return new Promise(n)}}return new t(function(t,r){return n.subscribe(function(n){return n.hasValue&&t(n.value),n.isError&&r(n.error),Dr})})}function Lt(n,t){return n.last().firstToPromise(t)}function qt(n){return!!n._isProperty}function Ut(n,t){return new Kr(n,t)}function jt(n){return bt(n,"").filter(!1).withDesc(new kr("Bacon","silence",[n]))}function Qt(n){var t=0;return Cn(function(r){function e(n){return n.isEnd?o?i():o=!0:u=r(n)}function i(){var i;for(o=!0;o&&u!==Dr;)i=n(t++),o=!1,i?s=i.subscribeInternal(e):r(c());return o=!0}var o=!1,u=Sr,s=function(){};return i(),function(){return s()}}).withDesc(new kr("Bacon","repeat",[n]))}function zt(n){if(!pr.isFunction(n.source))throw new Error("'source' option has to be a function");var t=n.source,r=n.retries||0,e=0,i=n.delay||function(){return 0},o=n.isRetryable||function(){return!0},u=!1,s=null;return Qt(function(n){function c(){return t(n).endOnError().transform(function(n,t){return h(n)?(s=n,o(s.error)&&(0===r||e<r)?void 0:(u=!0,t(n))):(p(n)&&(s=null,u=!0),t(n))})}if(u)return null;if(s){var f={error:s.error,retriesDone:e},a=jt(i(f));return e++,a.concat(J(null).flatMap(c))}return c()}).withDesc(new kr("Bacon","retry",[n]))}function Ht(n,t){return function(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];return n.apply(void 0,t.concat(r))}}function Rt(n,t){return ne.apply(void 0,[n].concat(t))}function Yt(n){for(var r=[],e=1;e<arguments.length;e++)r[e-1]=arguments[e];return Cn(function(e){return Rt(n,r)(e),t},function(n){return[n,c()]}).withDesc(new kr("Bacon","fromCallback",[n].concat(r)))}function Xt(n){for(var r=[],e=1;e<arguments.length;e++)r[e-1]=arguments[e];return Cn(function(e){return Rt(n,r)(e),t},function(n,t){return n?[new Er(n),c()]:[t,c()]}).withDesc(new kr("Bacon","fromNodeCallback",[n].concat(r)))}function $t(n){if(n.length){var t=0,r=new Kr(new kr("Bacon","fromArray",[n]),function(e){function i(){if(a=!0,!s){for(s=!0;a;)if(a=!1,u!==Dr&&!o){var h=n[t++];u=e(f(h)),u!==Dr&&(t===n.length?e(c()):Vr.afterTransaction(r,i))}return s=!1}}var o=!1,u=Sr,s=!1,a=!1;return Vr.soonButNotYet(r,i),function(){return o=!0}});return r}return sn().withDesc(new kr("Bacon","fromArray",n))}function Gt(n){return"undefined"!=typeof Symbol&&Symbol[n]?Symbol[n]:"undefined"!=typeof Symbol&&"function"==typeof Symbol.for?Symbol[n]=Symbol.for(n):"@@"+n}function Jt(n){var t;t=n[Gt("observable")]?n[Gt("observable")]():n;var r=new kr("Bacon","fromESObservable",[t]);return new Kr(r,function(n){var r=t.subscribe({error:function(t){n(new Er(t)),n(new gr)},next:function(t){n(new br(t))},complete:function(){n(new gr)}});return r.unsubscribe?function(){r.unsubscribe()}:r})}function Kt(n,t,r){var e=re(n),i=e[0],o=e[1],u=new kr("Bacon","fromEvent",[n,t]);return Cn(function(r){return pr.isFunction(t)?(t(i.bind(n),r),function(){return t(o.bind(n),r)}):(i.call(n,t,r),function(){return o.call(n,t,r)})},r).withDesc(u)}function Zt(n){return[n,c()]}function nr(n,t,r){return void 0===r&&(r=Zt),Cn(function(r){var e=n.then(r,function(n){return r(new Er(n))});return e&&"function"==typeof e.done&&e.done(),t?function(){if("function"==typeof n.abort)return n.abort()}:function(){}},r).withDesc(new kr("Bacon","fromPromise",[n]))}function tr(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];return Wn(n.slice(0,n.length-1)).onValues(n[arguments.length-1])}function rr(n,t){var r=0;return Nn(n,function(){return t[r++%t.length]}).withDesc(new kr("Bacon","repeatedly",[n,t]))}function er(n,t){var r=0;return Nn(n,function(){var n=t[r++];return r<t.length?n:r===t.length?[f(n),c()]:c()}).withDesc(new kr("Bacon","sequentially",[n,t]))}function ir(n){return function(t){try{return J(n(t))}catch(n){return J(new Er(n))}}}function or(n){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];for(var e=dn(t),i=0;i<e.length;i++){var o=e[i];o[1]=ur(o[1])}return cn.apply(void 0,e).scan(n,function(n,t){return t(n)}).withDesc(new kr("Bacon","update",[n].concat(t)))}function ur(n){return function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return function(r){return n.apply(void 0,[r].concat(t))}}}function sr(n){this.observable=n}var cr,fr=Array.isArray||function(n){return n instanceof Array},ar=function(){function n(n){this._isSome=!0,this.isDefined=!0,this.value=n}return n.prototype.getOrElse=function(n){return this.value},n.prototype.get=function(){return this.value},n.prototype.filter=function(t){return t(this.value)?new n(this.value):hr},n.prototype.map=function(t){return new n(t(this.value))},n.prototype.forEach=function(n){n(this.value)},n.prototype.toArray=function(){return[this.value]},n.prototype.inspect=function(){return"Some("+this.value+")"},n.prototype.toString=function(){return this.inspect()},n}(),hr={_isNone:!0,getOrElse:function(n){return n},get:function(){throw new Error("None.get()")},filter:function(){return hr},map:function(){return hr},forEach:function(){},isDefined:!1,toArray:function(){return[]},inspect:function(){return"None"},toString:function(){return this.inspect()}},pr={indexOf:function(){return Array.prototype.indexOf?function(n,t){return n.indexOf(t)}:function(n,t){for(var r,e=0;e<n.length;e++)if(r=n[e],t===r)return e;return-1}}(),indexWhere:function(n,t){for(var r,e=0;e<n.length;e++)if(r=n[e],t(r))return e;return-1},head:function(n){return n[0]},always:function(n){return function(){return n}},negate:function(n){return function(t){return!n(t)}},empty:function(n){return 0===n.length},tail:function(n){return n.slice(1,n.length)},filter:function(n,t){for(var r,e=[],i=0;i<t.length;i++)r=t[i],n(r)&&e.push(r);return e},map:function(n,t){for(var r,e=[],i=0;i<t.length;i++)r=t[i],e.push(n(r));return e},each:function(n,t){for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){var e=n[r];t(r,e)}},toArray:function(n){return fr(n)?n:[n]},contains:function(n,t){return-1!==pr.indexOf(n,t)},id:function(n){return n},last:function(n){return n[n.length-1]},all:function(n,t){void 0===t&&(t=pr.id);for(var r,e=0;e<n.length;e++)if(r=n[e],!t(r))return!1;return!0},any:function(n,t){void 0===t&&(t=pr.id);for(var r,e=0;e<n.length;e++)if(r=n[e],t(r))return!0;return!1},without:function(n,t){return pr.filter(function(t){return t!==n},t)},remove:function(n,t){var r=pr.indexOf(t,n);if(r>=0)return t.splice(r,1)},fold:function(n,t,r){for(var e,i=0;i<n.length;i++)e=n[i],t=r(t,e);return t},flatMap:function(n,t){return pr.fold(t,[],function(t,r){return t.concat(n(r))})},cached:function(n){var t=hr;return function(){return(void 0!==t&&null!==t?t._isNone:void 0)&&(t=n(),n=void 0),t}},bind:function(n,t){return function(){return n.apply(t,arguments)}},isFunction:function(n){return"function"==typeof n},toFunction:function(n){return"function"==typeof n?n:function(t){return n}},toString:function(n){var t={}.hasOwnProperty;try{if(lr++,null==n)return"undefined";if(pr.isFunction(n))return"function";if(fr(n))return lr>5?"[..]":"["+pr.map(pr.toString,n).toString()+"]";if(null!=(null!=n?n.toString:void 0)&&n.toString!==Object.prototype.toString)return n.toString();if("object"==typeof n){if(lr>5)return"{..}";var r=[];for(var e in n)if(t.call(n,e)){var i=function(){try{return n[e]}catch(n){return n}}();r.push(pr.toString(e)+":"+pr.toString(i))}return"{"+r+"}"}return n}finally{lr--}}},lr=0,vr=0,dr=function(){function n(){this.id=++vr,this.isEvent=!0,this._isEvent=!0,this.isEnd=!1,this.isInitial=!1,this.isNext=!1,this.isError=!1,this.hasValue=!1}return n.prototype.filter=function(n){return!0},n.prototype.inspect=function(){return this.toString()},n.prototype.log=function(){return this.toString()},n.prototype.toNext=function(){return this},n}(),yr=function(t){function r(n){var r=t.call(this)||this;if(r.hasValue=!0,n instanceof dr)throw new Er("Wrapping an event inside other event");return r.value=n,r}return n(r,t),r.prototype.fmap=function(n){return this.apply(n(this.value))},r.prototype.filter=function(n){return n(this.value)},r.prototype.toString=function(){return pr.toString(this.value)},r.prototype.log=function(){return this.value},r}(dr),br=function(t){function r(n){var r=t.call(this,n)||this;return r.isNext=!0,r._isNext=!0,r}return n(r,t),r.prototype.apply=function(n){return new r(n)},r}(yr),wr=function(t){function r(n){var r=t.call(this,n)||this;return r.isInitial=!0,r._isInitial=!0,r}return n(r,t),r.prototype.apply=function(n){return new r(n)},r.prototype.toNext=function(){return new br(this.value)},r}(yr),mr=function(t){function r(){var n=null!==t&&t.apply(this,arguments)||this;return n.hasValue=!1,n}return n(r,t),r.prototype.fmap=function(n){return this},r}(dr),gr=function(t){function r(){var n=null!==t&&t.apply(this,arguments)||this;return n.isEnd=!0,n}return n(r,t),r.prototype.toString=function(){return"<end>"},r}(mr),Er=function(t){function r(n){var r=t.call(this)||this;return r.isError=!0,r.error=n,r}return n(r,t),r.prototype.toString=function(){return"<error> "+pr.toString(this.error)},r}(mr);!function(n){n.more="<more>",n.noMore="<no-more>"}(cr||(cr={}));var Sr=cr.more,Dr=cr.noMore,Ar=[],Ir=!1,Br=function(n){return Ar.push(n)},kr=function(){function n(n,t,r){void 0===r&&(r=[]),this._isDesc=!0,this.context=n,this.method=t,this.args=r}return n.prototype.deps=function(){return this.cached||(this.cached=y([this.context].concat(this.args))),this.cached},n.prototype.toString=function(){var n=pr.map(pr.toString,this.args);return pr.toString(this.context)+"."+pr.toString(this.method)+"("+n+")"},n}(),Mr={setTimeout:function(n,t){return setTimeout(n,t)},setInterval:function(n,t){return setInterval(n,t)},clearInterval:function(n){return clearInterval(n)},clearTimeout:function(n){return clearTimeout(n)},now:function(){return(new Date).getTime()}},xr={scheduler:Mr},Wr=function(){function n(n){void 0===n&&(n=[]),this.unsubscribed=!1,this.unsubscribe=pr.bind(this.unsubscribe,this),this.unsubscribed=!1,this.subscriptions=[],this.starting=[];for(var t,r=0;r<n.length;r++)t=n[r],this.add(t)}return n.prototype.add=function(n){var r=this;if(!this.unsubscribed){var e=!1,i=t;this.starting.push(n);var o=function(){r.unsubscribed||(e=!0,r.remove(i),pr.remove(n,r.starting))};i=n(this.unsubscribe,o),this.unsubscribed||e?i():this.subscriptions.push(i),pr.remove(n,this.starting)}},n.prototype.remove=function(n){if(!this.unsubscribed)return void 0!==pr.remove(n,this.subscriptions)?n():void 0},n.prototype.unsubscribe=function(){if(!this.unsubscribed){this.unsubscribed=!0;for(var n=this.subscriptions,t=0;t<n.length;t++)n[t]();this.subscriptions=[],this.starting=[]}},n.prototype.count=function(){return this.unsubscribed?0:this.subscriptions.length+this.starting.length},n.prototype.empty=function(){return 0===this.count()},n}(),_r=void 0,Or=[],Tr={},Pr=[],Fr=0,Cr={},Nr=!1,Vr={toString:b,whenDoneWith:A,hasWaiters:_,inTransaction:M,currentEventId:x,wrappedSubscribe:W,afterTransaction:E,soonButNotYet:g,isInTransaction:m},Lr=function(){function n(n,t){this._isSource=!0,this.flatten=!0,this.ended=!1,this.obs=n,this.sync=t}return n.prototype.subscribe=function(n){
return this.obs.subscribeInternal(n)},n.prototype.toString=function(){return this.obs.toString()},n.prototype.markEnded=function(){this.ended=!0},n.prototype.mayHave=function(n){return!0},n}(),qr=function(t){function r(){return null!==t&&t.apply(this,arguments)||this}return n(r,t),r.prototype.consume=function(){return this.value},r.prototype.push=function(n){this.value=n},r.prototype.hasAtLeast=function(n){return!!this.value},r}(Lr),Ur=function(t){function r(n,r){var e=t.call(this,n,r)||this;return e.flatten=!1,e.queue=[],e}return n(r,t),r.prototype.consume=function(){return this.queue.shift()},r.prototype.push=function(n){return this.queue.push(n)},r.prototype.mayHave=function(n){return!this.ended||this.queue.length>=n},r.prototype.hasAtLeast=function(n){return this.queue.length>=n},r}(Lr),jr=function(t){function r(n){var r=t.call(this,n,!0)||this;return r.queue=[],r}return n(r,t),r.prototype.consume=function(){var n=this.queue;return this.queue=[],{value:n}},r.prototype.push=function(n){return this.queue.push(n.value)},r.prototype.hasAtLeast=function(n){return!0},r}(Lr),Qr=function(n){return void 0!==n&&null!==n?n:pr.id},zr={},Hr=function(){function n(n,t,r){this.pushing=!1,this.ended=!1,this.prevError=void 0,this.unsubSrc=void 0,this._subscribe=t,this._handleEvent=r,this.subscribe=pr.bind(this.subscribe,this),this.handleEvent=pr.bind(this.handleEvent,this),this.subscriptions=[],this.observable=n,this.queue=[]}return n.prototype.hasSubscribers=function(){return this.subscriptions.length>0},n.prototype.removeSub=function(n){return this.subscriptions=pr.without(n,this.subscriptions),this.subscriptions},n.prototype.push=function(n){return n.isEnd&&(this.ended=!0),Vr.inTransaction(n,this,this.pushIt,[n])},n.prototype.pushToSubscriptions=function(n){try{for(var t=this.subscriptions,r=t.length,e=0;e<r;e++){var i=t[e];(i.sink(n)===Dr||n.isEnd)&&this.removeSub(i)}return!0}catch(n){throw this.pushing=!1,this.queue=[],n}},n.prototype.pushIt=function(n){if(this.pushing)return this.queue.push(n),Sr;if(n!==this.prevError){for(n.isError&&(this.prevError=n),this.pushing=!0,this.pushToSubscriptions(n),this.pushing=!1;;){var t=this.queue.shift();if(!t)break;this.push(t)}return this.hasSubscribers()?Sr:(this.unsubscribeFromSource(),Dr)}},n.prototype.handleEvent=function(n){return this._handleEvent?this._handleEvent(n):this.push(n)},n.prototype.unsubscribeFromSource=function(){this.unsubSrc&&this.unsubSrc(),this.unsubSrc=void 0},n.prototype.subscribe=function(n){var r=this;if(this.ended)return n(c()),t;var e={sink:n};return this.subscriptions.push(e),1===this.subscriptions.length&&(this.unsubSrc=this._subscribe(this.handleEvent)),function(){if(r.removeSub(e),!r.hasSubscribers())return r.unsubscribeFromSource()}},n.prototype.inspect=function(){return this.observable.toString()},n}(),Rr=function(r){function i(n,t,i){var o=r.call(this,n,t,i)||this;return o.current=e(),o.propertyEnded=!1,o.subscribe=pr.bind(o.subscribe,o),o}return n(i,r),i.prototype.push=function(n){return n.isEnd&&(this.propertyEnded=!0),n instanceof yr?(this.current=new ar(n),this.currentValueRootId=Vr.currentEventId()):n.hasValue&&console.error("Unknown event, two Bacons loaded?",n.constructor),r.prototype.push.call(this,n)},i.prototype.maybeSubSource=function(n,e){return e===Dr?t:this.propertyEnded?(n(c()),t):r.prototype.subscribe.call(this,n)},i.prototype.subscribe=function(n){var t=this,r=Sr;if(this.current.isDefined&&(this.hasSubscribers()||this.propertyEnded)){var e=Vr.currentEventId(),i=this.currentValueRootId;return!this.propertyEnded&&i&&e&&e!==i?(Vr.whenDoneWith(this.observable,function(){if(t.currentValueRootId===i)return n(u(t.current.get().value))}),this.maybeSubSource(n,r)):(Vr.inTransaction(void 0,this,function(){return r=n(u(t.current.get().value))},[]),this.maybeSubSource(n,r))}return this.maybeSubSource(n,r)},i.prototype.inspect=function(){return this.observable+" current= "+this.current},i}(Hr),Yr=function(){function n(n,t,r){this.push=function(n){},this.scheduled=null,this.end=void 0,this.values=[],this.onFlush=n,this.onInput=t,this.delay=r}return n.prototype.flush=function(){if(this.scheduled&&(xr.scheduler.clearTimeout(this.scheduled),this.scheduled=null),this.values.length>0){var n=this.values;this.values=[];var t=this.push(s(n));if(null!=this.end)return this.push(this.end);if(t!==Dr)return this.onFlush(this)}else if(null!=this.end)return this.push(this.end)},n.prototype.schedule=function(){var n=this;if(!this.scheduled)return this.scheduled=this.delay(function(){return n.flush()})},n}(),Xr=0,$r=function(){function n(n){this.id=++Xr,this._isObservable=!0,this.desc=n,this.initialDesc=n}return n.prototype.awaiting=function(n){return xn(this,n)},n.prototype.bufferingThrottle=function(n){return St(this,n)},n.prototype.combine=function(n,t){return On(this,n,t)},n.prototype.debounce=function(n){return mt(this,n)},n.prototype.debounceImmediate=function(n){return gt(this,n)},n.prototype.decode=function(n){return Nt(this,n)},n.prototype.delay=function(n){return wt(this,n)},n.prototype.deps=function(){return this.desc.deps()},n.prototype.diff=function(n,t){return Wt(this,n,t)},n.prototype.doAction=function(n){return this.transform(j(n),new kr(this,"doAction",[n]))},n.prototype.doEnd=function(n){return this.transform(Q(n),new kr(this,"doEnd",[n]))},n.prototype.doError=function(n){return this.transform(U(n),new kr(this,"doError",[n]))},n.prototype.doLog=function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];return this.transform(q(n),new kr(this,"doLog",n))},n.prototype.endAsValue=function(){return rn(this)},n.prototype.endOnError=function(n){return void 0===n&&(n=function(n){return!0}),en(this,n)},n.prototype.errors=function(){return this.filter(function(n){return!1}).withDesc(new kr(this,"errors"))},n.prototype.filter=function(n){return Yn(this,n)},n.prototype.first=function(){return N(1,this,new kr(this,"first"))},n.prototype.firstToPromise=function(n){return Vt(this,n)},n.prototype.flatScan=function(n,t){return _t(this,n,t)},n.prototype.fold=function(n,t){return et(this,n,t)},n.prototype.forEach=function(n){return void 0===n&&(n=t),this.onValue(n)},n.prototype.groupBy=function(n,t){return void 0===t&&(t=pr.id),Mt(this,n,t)},n.prototype.holdWhen=function(n){return Ot(this,n)},n.prototype.inspect=function(){return this.toString()},n.prototype.internalDeps=function(){return this.initialDesc.deps()},n.prototype.last=function(){return X(this)},n.prototype.log=function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];return L(n,this),this},n.prototype.mapEnd=function(n){return this.transform(H(n),new kr(this,"mapEnd",[n]))},n.prototype.mapError=function(n){return this.transform(R(n),new kr(this,"mapError",[n]))},n.prototype.name=function(n){return this._name=n,this},n.prototype.onEnd=function(n){return void 0===n&&(n=t),this.subscribe(function(t){if(t.isEnd)return n()})},n.prototype.onError=function(n){return void 0===n&&(n=t),this.subscribe(function(t){if(t.isError)return n(t.error)})},n.prototype.onValue=function(n){return void 0===n&&(n=t),this.subscribe(function(t){if(t.hasValue)return n(t.value)})},n.prototype.onValues=function(n){return this.onValue(function(t){return n.apply(void 0,t)})},n.prototype.scan=function(n,t){return z(this,n,t)},n.prototype.skip=function(n){return Pn(this,n)},n.prototype.skipDuplicates=function(n){return C(this,n)},n.prototype.skipErrors=function(){return Y(this)},n.prototype.skipUntil=function(n){return It(this,n)},n.prototype.skipWhile=function(n){return Bt(this,n)},n.prototype.slidingWindow=function(n,t){return void 0===t&&(t=0),xt(this,n,t)},n.prototype.subscribe=function(n){var r=this;return void 0===n&&(n=t),Vr.wrappedSubscribe(this,function(n){return r.subscribeInternal(n)},n)},n.prototype.take=function(n){return N(n,this)},n.prototype.takeUntil=function(n){return ut(this,n)},n.prototype.takeWhile=function(n){return Dt(this,n)},n.prototype.throttle=function(n){return Et(this,n)},n.prototype.toPromise=function(n){return Lt(this,n)},n.prototype.toString=function(){return this._name?this._name:this.desc.toString()},n.prototype.withDesc=function(n){return n&&(this.desc=n),this},n.prototype.withDescription=function(n,t){for(var r=[],e=2;e<arguments.length;e++)r[e-2]=arguments[e];return this.desc=d.apply(void 0,[n,t].concat(r)),this},n.prototype.zip=function(n,t){return Ft(this,n,t)},n}(),Gr=function(r){function e(n,t,e){var i=r.call(this,n)||this;return i._isProperty=!0,i.dispatcher=new Rr(i,t,e),v(i),i}return n(e,r),e.prototype.and=function(n){return Gn(this,n)},e.prototype.changes=function(){var n=this;return new Kr(new kr(this,"changes",[]),function(t){return n.dispatcher.subscribe(function(n){if(!n.isInitial)return t(n)})})},e.prototype.concat=function(n){return rt(this,this.changes().concat(n))},e.prototype.delayChanges=function(n,t){return rt(this,t(this.changes())).withDesc(n)},e.prototype.flatMap=function(n){return st(this,n)},e.prototype.flatMapConcat=function(n){return Fn(this,n)},e.prototype.flatMapError=function(n){return ct(this,n)},e.prototype.flatMapEvent=function(n){return tn(this,n)},e.prototype.flatMapFirst=function(n){return Zn(this,n)},e.prototype.flatMapLatest=function(n){return ft(this,n)},e.prototype.flatMapWithConcurrencyLimit=function(n,t){return at(this,n,t)},e.prototype.map=function(n){return En(this,n)},e.prototype.not=function(){return $n(this)},e.prototype.or=function(n){return Jn(this,n)},e.prototype.sample=function(n){return Un(this,n)},e.prototype.sampledBy=function(n,t){return void 0===t&&(t=function(n,t){return n}),Ln(this,n,t)},e.prototype.startWith=function(n){return ot(this,n)},e.prototype.subscribeInternal=function(n){return void 0===n&&(n=t),this.dispatcher.subscribe(n)},e.prototype.toEventStream=function(n){var t=this;return new Kr(new kr(this,"toEventStream",[]),function(n){return t.subscribeInternal(function(t){return n(t.toNext())})},void 0,n)},e.prototype.toProperty=function(){return this},e.prototype.transform=function(n,t){return jn(this,n,t)},e.prototype.withStateMachine=function(n,t){return O(n,t,this)},e}($r),Jr={forceAsync:!1},Kr=function(r){function o(n,t,e,i){var o=r.call(this,n)||this;return o._isEventStream=!0,i!==Jr&&(t=dt(o,t)),o.dispatcher=new Hr(o,t,e),v(o),o}return n(o,r),o.prototype.subscribeInternal=function(n){return void 0===n&&(n=t),this.dispatcher.subscribe(n)},o.prototype.toEventStream=function(){return this},o.prototype.transform=function(n,t){return Qn(this,n,t)},o.prototype.withStateMachine=function(n,t){return O(n,t,this)},o.prototype.map=function(n){return En(this,n)},o.prototype.flatMap=function(n){return st(this,n)},o.prototype.flatMapConcat=function(n){return Fn(this,n)},o.prototype.flatMapFirst=function(n){return Zn(this,n)},o.prototype.flatMapLatest=function(n){return ft(this,n)},o.prototype.flatMapWithConcurrencyLimit=function(n,t){return at(this,n,t)},o.prototype.flatMapError=function(n){return ct(this,n)},o.prototype.flatMapEvent=function(n){return tn(this,n)},o.prototype.sampledBy=function(n,t){return void 0===t&&(t=function(n,t){return n}),qn(this,n,t)},o.prototype.startWith=function(n){return it(this,n)},o.prototype.toProperty=function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];var r=n.length?i(n[0]):e(),o=this.dispatcher,u=new kr(this,"toProperty",Array.prototype.slice.apply(arguments)),s=o.subscribe;return new Gr(u,$(r,s))},o.prototype.concat=function(n,t){return nt(this,n,t)},o.prototype.merge=function(n){return yt(this,n).withDesc(new kr(this,"merge",[n]))},o.prototype.not=function(){return $n(this)},o.prototype.delayChanges=function(n,t){return t(this).withDesc(n)},o.prototype.bufferWithTime=function(n){return ht(this,n)},o.prototype.bufferWithCount=function(n){return pt(this,n)},o.prototype.bufferWithTimeOrCount=function(n,t){return lt(this,n,t)},o}($r),Zr=function(t){function r(){var n=t.call(this,new kr("Bacon","Bus",[]),function(t){return n.subscribeAll(t)})||this;return n.pushing=!1,n.pushQueue=void 0,n.ended=!1,n.subscriptions=[],n.unsubAll=pr.bind(n.unsubAll,n),n.subscribeAll=pr.bind(n.subscribeAll,n),n.guardedSink=pr.bind(n.guardedSink,n),n.subscriptions=[],n.ended=!1,Kr.call(n,new kr("Bacon","Bus",[]),n.subscribeAll),n}return n(r,t),r.prototype.unsubAll=function(){for(var n,t=this.subscriptions,r=0;r<t.length;r++)n=t[r],"function"==typeof n.unsub&&n.unsub()},r.prototype.subscribeAll=function(n){if(this.ended)n(c());else{this.sink=n;for(var t,r=this.subscriptions.slice(),e=0;e<r.length;e++)t=r[e],this.subscribeInput(t)}return this.unsubAll},r.prototype.guardedSink=function(n){var t=this;return function(r){return r.isEnd?(t.unsubscribeInput(n),Dr):t.sink?t.sink(r):void 0}},r.prototype.subscribeInput=function(n){return n.unsub=n.input.dispatcher.subscribe(this.guardedSink(n.input)),n.unsub},r.prototype.unsubscribeInput=function(n){for(var t,r=this.subscriptions,e=0;e<r.length;e++)if(t=r[e],t.input===n)return"function"==typeof t.unsub&&t.unsub(),void this.subscriptions.splice(e,1)},r.prototype.plug=function(n){var t=this;if(!this.ended){var r={input:n};return this.subscriptions.push(r),void 0!==this.sink&&this.subscribeInput(r),function(){return t.unsubscribeInput(n)}}},r.prototype.end=function(){if(this.ended=!0,this.unsubAll(),"function"==typeof this.sink)return this.sink(c())},r.prototype.push=function(n){if(!this.ended&&"function"==typeof this.sink){var t=!this.pushing;if(!t)return this.pushQueue||(this.pushQueue=[]),void this.pushQueue.push(n);this.pushing=!0;try{return this.sink(s(n))}finally{if(t&&this.pushQueue){for(var r=0;r<this.pushQueue.length;){var e=this.pushQueue[r];this.sink(s(e)),r++}this.pushQueue=void 0}this.pushing=!1}}},r.prototype.error=function(n){if("function"==typeof this.sink)return this.sink(new Er(n))},r}(Kr),ne=function(n){return function(t){for(var r=[],e=1;e<arguments.length;e++)r[e-1]=arguments[e];if("object"==typeof t&&r.length){var i=t,o=r[0];t=function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];return i[o].apply(i,n)},r=r.slice(1)}return n.apply(void 0,[t].concat(r))}}(function(n){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return pr.isFunction(n)?t.length?Ht(n,t):n:pr.always(n)}),te=[["addEventListener","removeEventListener"],["addListener","removeListener"],["on","off"],["bind","unbind"]],re=function(n){for(var t,r=0;r<te.length;r++){t=te[r];var e=[n[t[0]],n[t[1]]];if(e[0]&&e[1])return e}for(var i=0;i<te.length;i++){t=te[i];var o=n[t[0]];if(o)return[o,function(){}]}throw new Error("No suitable event methods in "+n)},ee={asEventStream:function(n,t,r){var e=this;return pr.isFunction(t)&&(r=t,t=void 0),Cn(function(r){return e.on(n,t,r),function(){return e.off(n,t,r)}},r).withDesc(new kr(this.selector||this,"asEventStream",[n]))},init:function(n){n.fn.asEventStream=ee.asEventStream}};sr.prototype.subscribe=function(n,t,r){var e="function"==typeof n?{next:n,error:t,complete:r}:n,i={closed:!1,unsubscribe:function(){i.closed=!0,o()}},o=this.observable.subscribe(function(n){n.isError?(e.error&&e.error(n.error),i.unsubscribe()):n.isEnd?(i.closed=!0,e.complete&&e.complete()):e.next&&e.next(n.value)});return i},sr.prototype[Gt("observable")]=function(){return this},$r.prototype.toESObservable=function(){return new sr(this)},$r.prototype[Gt("observable")]=$r.prototype.toESObservable;var ie={_:pr,$:ee,Bus:Zr,CompositeUnsubscribe:Wr,Desc:kr,End:gr,Error:Er,Event:dr,EventStream:Kr,Initial:wr,Next:br,Observable:$r,UpdateBarrier:Vr,combineAsArray:Wn,combineTemplate:Ct,combineWith:_n,concatAll:tt,constant:Dn,fromArray:$t,fromBinder:Cn,fromCallback:Yt,fromESObservable:Jt,fromEvent:Kt,fromEventTarget:Kt,fromNodeCallback:Xt,fromPoll:Nn,fromPromise:nr,getScheduler:function(){return xr.scheduler},groupSimultaneous:kn,interval:Vn,later:bt,mergeAll:yt,more:Sr,never:sn,noMore:Dr,onValues:tr,once:J,repeat:Qt,repeatedly:rr,retry:zt,sequentially:er,setScheduler:function(n){return xr.scheduler=n},silence:jt,spy:Br,toString:function(){return"Bacon"},try:ir,update:or,version:"<version>",when:cn,zipAsArray:Tt,zipWith:Pt};return ie.Bacon=ie,ie});